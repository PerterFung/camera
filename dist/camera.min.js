"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e=/([\:\-\_]+(.))/g,t=/^moz([A-Z])/,n=function(n){return n.replace(e,function(e,t,n,r){return r?n.toUpperCase():n}).replace(t,"Moz$1")},r=new Number(document.documentMode)<9?function(e,t){if(!e||!t)return null;"float"===(t=n(t))&&(t="styleFloat");try{switch(t){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(e){return 1}default:if(window.getComputedStyle){var r=e.ownerDocument.defaultView;return r&&r.opener||(r=window),r.getComputedStyle(e)[t]}return e.style[t]||e.currentStyle?e.currentStyle[t]:null}}catch(n){return e.style[t]}}:function(e,t){if(!e||!t)return null;"float"===(t=n(t))&&(t="cssFloat");try{var r=document.defaultView.getComputedStyle(e,"");return e.style[t]||r?r[t]:null}catch(n){return e.style[t]}},o=function(){function e(t){_classCallCheck(this,e),this.$el=document.getElementById(t),this.mediaStreamTrack=null,this.imageSrcList=[]}return _createClass(e,[{key:"init",value:function(e,t){var n=this,r=this.windowUrl(),o=this.getUserMedia(),a=function(e){console.log(e),t&&t(e)},i=function(t){n.mediaStreamTrack=t.getTracks()[0],n.$el.src=r.createObjectURL(t),e&&e()};try{o({video:!0},i,a)}catch(e){o("video",i,a)}}},{key:"destroy",value:function(){this.mediaStreamTrack&&this.mediaStreamTrack.stop(),this.$el.src=""}},{key:"shoot",value:function(e,t){var n=this.$el,o=e.x||0,a=e.y||0,i=e.width||r(n,"width").slice(0,-2),u=e.height||r(n,"height").slice(0,-2),c=document.createElement("canvas");c.width=i,c.height=u,c.getContext("2d").drawImage(n,o,a,+i,+u);var l=c.toDataURL("image/png");this.imageSrcList.push(l),t&&t(l)}},{key:"windowUrl",value:function(){return window.URL||window.webkitURL||window.msURL||window.oURL}},{key:"getUserMedia",value:function(){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return function(t,n,r){e.call(navigator,t,n,r)}}},{key:"toCamelCase",value:function(e){return n(e)}},{key:"getStyle",value:function(e,t){return r(e,t)}}]),e}();"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=o:window.Camera=o}();