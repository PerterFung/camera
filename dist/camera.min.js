"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(){var e=/([\:\-\_]+(.))/g,t=/^moz([A-Z])/,r=function(r){return r.replace(e,function(e,t,r,n){return n?r.toUpperCase():r}).replace(t,"Moz$1")},n=(new Number(document.documentMode),function(){function e(t,r){_classCallCheck(this,e),this.$el=document.getElementById(t),this.mediaStreamTrack=null,this.userSuccessCallback=r.successCallback,this.userErrorCallback=r.errorCallback}return _createClass(e,[{key:"init",value:function(){var e=this,t=this.windowUrl(),r=this.getUserMedia(),n=function(t){console.log(t),e.userErrorCallback&&e.userErrorCallback(t)},o=function(r){e.mediaStreamTrack=r.getTracks()[0],e.$el.src=t.createObjectURL(r),e.userSuccessCallback&&e.userSuccessCallback()};try{r({video:!0},o,n)}catch(e){r("video",o,n)}}},{key:"destroy",value:function(){this.mediaStreamTrack&&this.mediaStreamTrack.stop(),this.$el.src=""}},{key:"shoot",value:function(e){var t=document.createElement("canvas");t.width="400",t.height="304",t.getContext("2d").drawImage(this.$el,0,0,400,304),document.getElementById("img").src=t.toDataURL("image/png")}},{key:"windowUrl",value:function(){return window.URL||window.webkitURL||window.msURL||window.oURL}},{key:"getUserMedia",value:function(){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return function(t,r,n){e.call(navigator,t,r,n)}}}]),e}());"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n:window.Camera=n}();